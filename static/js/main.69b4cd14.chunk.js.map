{"version":3,"sources":["firebase/firebase.js","components/Header.js","components/Sidebar.js","components/Message.js","components/Chat.js","components/Login.js","App.js","components/UI/GlobalStyles.js","index.js"],"names":["database","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","auth","provider","GoogleAuthProvider","CHANNELS","MESSAGES","Header","Container","style","backgroundColor","Main","UserContainer","styled","header","div","Sidebar","channels","push","useHistory","ChannelsContainer","NewChannelContainer","Label","Button","onClick","channelName","prompt","collection","add","name","ChannelList","map","channel","Channel","id","aside","span","button","ul","li","Message","content","timestamp","user","userImage","date","Date","toDate","toUTCString","src","alt","width","height","Chat","useState","setChannel","messages","setMessages","input","setInput","channelId","useParams","useEffect","getChannel","getMessages","doc","onSnapshot","snapshot","console","log","data","orderBy","docs","ChannelName","ChannelInfo","MessageContainer","message","ChatInput","type","value","onChange","e","target","Timestamp","now","Login","setUser","signInWithPopup","then","result","catch","error","App","setChannels","getChannels","AppContainer","path","component","exact","main","GlobalStyles","createGlobalStyle","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.69b4cd14.chunk.js","sourcesContent":["import firebase from 'firebase';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: 'AIzaSyAlKGckG39Hw5zm6rWk6zskfoX_cKkekxc',\r\n  authDomain: 'chat-app-3c96c.firebaseapp.com',\r\n  projectId: 'chat-app-3c96c',\r\n  storageBucket: 'chat-app-3c96c.appspot.com',\r\n  messagingSenderId: '291670964853',\r\n  appId: '1:291670964853:web:00af9649991cf38850563c',\r\n};\r\n\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\nconst database = firebaseApp.firestore();\r\nconst auth = firebase.auth();\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\n\r\nexport { auth, provider };\r\n\r\n//Collections\r\nexport const CHANNELS = 'channels';\r\nexport const MESSAGES = 'messages';\r\n\r\nexport default database;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nfunction Header() {\r\n  return (\r\n    <Container style={{ backgroundColor: 'green' }}>\r\n      <Main>Some menu</Main>\r\n      <UserContainer>User</UserContainer>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n\r\nconst Container = styled.header`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\nconst Main = styled.div``;\r\nconst UserContainer = styled.div``;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { useHistory } from 'react-router-dom';\r\nimport database, { CHANNELS } from '../firebase/firebase';\r\nimport AddIcon from '@material-ui/icons/AddCircleOutlineRounded';\r\n\r\nfunction Sidebar({ channels }) {\r\n  const { push } = useHistory();\r\n\r\n  const addNewChannel = () => {\r\n    const channelName = prompt('Type new room name');\r\n    channelName &&\r\n      database.collection(CHANNELS).add({\r\n        name: channelName,\r\n      });\r\n  };\r\n\r\n  const goToChannel = (id) => push(`/channel/${id}`);\r\n\r\n  return (\r\n    <Container>\r\n      <ChannelsContainer>\r\n        <NewChannelContainer>\r\n          <Label>Channels</Label>\r\n          <Button onClick={addNewChannel}>\r\n            <AddIcon />\r\n          </Button>\r\n        </NewChannelContainer>\r\n        <ChannelList>\r\n          {channels.map((channel) => (\r\n            <Channel key={channel.id} onClick={() => goToChannel(channel.id)}>\r\n              # {channel.name}\r\n            </Channel>\r\n          ))}\r\n        </ChannelList>\r\n      </ChannelsContainer>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Sidebar;\r\n\r\nconst Container = styled.aside`\r\n  background: orange;\r\n`;\r\nconst ChannelsContainer = styled.div``;\r\nconst NewChannelContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 6px;\r\n`;\r\nconst Label = styled.span`\r\n  font-weight: bold;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  background: transparent;\r\n  border: none;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst ChannelList = styled.ul``;\r\nconst Channel = styled.li`\r\n  cursor: pointer;\r\n  padding: 6px;\r\n  &:hover {\r\n    background: gray;\r\n  }\r\n`;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nfunction Message({ id, content, timestamp, user, userImage }) {\r\n  const date = new Date(timestamp.toDate()).toUTCString();\r\n\r\n  return (\r\n    <Container>\r\n      <p>{user}</p>\r\n      <p>{date}</p>\r\n      <p>{content}</p>\r\n      <img\r\n        src={userImage}\r\n        alt=\"user\"\r\n        style={{ width: '50px', height: '50px' }}\r\n      />\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Message;\r\n\r\nconst Container = styled.div`\r\n  background-color: #fff;\r\n  padding: 8px;\r\n  border: 1px solid gray;\r\n  border-radius: 8px;\r\n  margin: 8px;\r\n`;\r\n","import React, { useEffect, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { useParams } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport Message from './Message';\r\nimport database, { CHANNELS, MESSAGES } from '../firebase/firebase';\r\nimport firebase from 'firebase';\r\n\r\nfunction Chat() {\r\n  const [channel, setChannel] = useState({});\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const { channelId } = useParams();\r\n\r\n  useEffect(() => {\r\n    getChannel();\r\n    getMessages();\r\n  }, [channelId]);\r\n\r\n  const getChannel = () => {\r\n    database\r\n      .collection(CHANNELS)\r\n      .doc(channelId)\r\n      .onSnapshot((snapshot) => {\r\n        console.log(snapshot.data());\r\n        setChannel(snapshot.data());\r\n      });\r\n  };\r\n\r\n  const getMessages = () => {\r\n    database\r\n      .collection(CHANNELS)\r\n      .doc(channelId)\r\n      .collection(MESSAGES)\r\n      .orderBy('timestamp', 'asc')\r\n      .onSnapshot((snapshot) =>\r\n        setMessages(\r\n          snapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n          })),\r\n        ),\r\n      );\r\n  };\r\n\r\n  const sendMessage = () => {\r\n    input &&\r\n      database.collection(CHANNELS).doc(channelId).collection(MESSAGES).add({\r\n        content: input,\r\n        timestamp: firebase.firestore.Timestamp.now(),\r\n      });\r\n  };\r\n\r\n  return (\r\n    <Container style={{ backgroundColor: 'pink' }}>\r\n      <Header>\r\n        <ChannelName># {channel && channel.name}</ChannelName>\r\n        <ChannelInfo>Channel Info</ChannelInfo>\r\n      </Header>\r\n      <MessageContainer>\r\n        {messages.map((message) => (\r\n          <Message key={message.id} {...message} />\r\n        ))}\r\n      </MessageContainer>\r\n      <ChatInput>\r\n        <input\r\n          type=\"text\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n        />\r\n        <button onClick={sendMessage}>Send</button>\r\n      </ChatInput>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n\r\nconst Container = styled.div`\r\n  display: grid;\r\n  grid-template-rows: 64px auto min-content;\r\n`;\r\nconst Header = styled.div`\r\n  background-color: yellow;\r\n  padding: 10px;\r\n  border-bottom: 1px solid gray;\r\n`;\r\n\r\nconst ChannelName = styled.div`\r\n  font-weight: bold;\r\n`;\r\nconst ChannelInfo = styled.div``;\r\n\r\nconst MessageContainer = styled.div`\r\n  background-color: pink;\r\n`;\r\nconst ChatInput = styled.div`\r\n  background-color: blue;\r\n`;\r\n","import React, { useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport PropTypes from 'prop-types';\r\nimport { auth, provider } from '../firebase/firebase';\r\n\r\nfunction Login({ setUser }) {\r\n  // useEffect(() => signIn(), []);\r\n\r\n  const signIn = () => {\r\n    auth\r\n      .signInWithPopup(provider)\r\n      .then((result) => setUser(result.user))\r\n      .catch((error) => console.log(error));\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <button onClick={signIn}>Login</button>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n\r\nconst Container = styled.div``;\r\n","import { useEffect, useState } from 'react';\r\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport database, { CHANNELS } from './firebase/firebase';\r\nimport styled from 'styled-components';\r\nimport Header from './components/Header';\r\nimport Sidebar from './components/Sidebar';\r\nimport Chat from './components/Chat';\r\nimport Login from './components/Login';\r\n\r\nfunction App() {\r\n  const [channels, setChannels] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    getChannels();\r\n  }, []);\r\n\r\n  const getChannels = () => {\r\n    database.collection(CHANNELS).onSnapshot((snapshot) => {\r\n      setChannels(\r\n        snapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          name: doc.data().name,\r\n        })),\r\n      );\r\n    });\r\n  };\r\n\r\n  return (\r\n    <AppContainer>\r\n      <Router>\r\n        <Header />\r\n        {user ? (\r\n          <Main>\r\n            <Sidebar channels={channels} />\r\n            <Switch>\r\n              <Route path=\"/channel/:channelId\" component={Chat} />\r\n              <Route path=\"/\" component={Login} exact />\r\n              <Route>Not Found</Route>\r\n            </Switch>\r\n          </Main>\r\n        ) : (\r\n          <Login setUser={setUser} />\r\n        )}\r\n      </Router>\r\n    </AppContainer>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\nconst AppContainer = styled.div`\r\n  min-height: 100vh;\r\n  display: grid;\r\n  grid-template-rows: 40px 1fr;\r\n`;\r\n\r\nconst Main = styled.main`\r\n  display: grid;\r\n  grid-template-columns: 260px 1fr;\r\n`;\r\n","import { createGlobalStyle } from 'styled-components';\r\n\r\nconst GlobalStyles = createGlobalStyle`\r\n    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');\r\n\r\n    * {\r\n        margin: 0;\r\n        padding: 0;\r\n        box-sizing: border-box;\r\n        font-family: 'Poppins', sans-serif;\r\n    }\r\n\r\n    body {\r\n        background: gray;\r\n    }\r\n`;\r\n\r\nexport default GlobalStyles;\r\n","import React from 'react';\nimport { render } from 'react-dom';\nimport App from './App';\nimport GlobalStyles from './components/UI/GlobalStyles';\n\nrender(\n  <React.StrictMode>\n    <GlobalStyles />\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}